var _i_=this._i_||function(){},_r_=this._r_||function(i){return i};booking.jstmpl("tt_ufi_panel_loading",function(){_i_("790:6e261484");var t=['\n    <div class="header">\n        <div class="map loading">\n            <div class="grid"></div>\n        </div>\n    </div>\n    <div class="content">\n        <div class="card">\n            <div class="text text-third loading"></div>\n            <div class="text text-half loading"></div>\n            <div class="inline">\n                <div class="photo loading"></div>\n                <div class="photo photo-partial loading"></div>\n            </div>\n            <div class="inline">\n                <div class="tag tag-first loading"></div>\n                <div class="tag tag-second loading"></div>\n                <div class="tag loading"></div>\n            </div>\n            <div class="text loading"></div>\n        </div>\n        <div class="card">\n            <div class="text text-third loading"></div>\n            <div class="text text-half loading"></div>\n            <div class="inline">\n                <div class="photo loading"></div>\n                <div class="photo photo-partial loading"></div>\n            </div>\n            <div class="inline">\n                <div class="tag tag-first loading"></div>\n                <div class="tag tag-second loading"></div>\n                <div class="tag loading"></div>\n            </div>\n            <div class="text loading"></div>\n        </div>\n    </div>\n'];return _r_(function(i){_i_("790:5170e28e");var e="";this.fn;return _r_(e+=t[0])})}()),booking.jstmpl("tt_beach_panel_loading",function(){_i_("790:308e79df");var t=['\n    <div class="content">\n        <div class="card card-main">\n            <div class="inline">\n                <div class="photo photo-large loading"></div>\n                <div class="photo photo-large photo-partial loading"></div>\n            </div>\n            <div class="text loading"></div>\n            <div class="text loading"></div>\n            <div class="text text-half loading"></div>\n            <div class="inline">\n                <div class="tag tag-first loading"></div>\n                <div class="tag tag-second loading"></div>\n                <div class="tag loading"></div>\n            </div>\n        </div>\n        <div class="card">\n            <div class="text text-third loading"></div>\n            <div class="text loading"></div>\n            <div class="text loading"></div>\n            <div class="text loading"></div>\n        </div>\n        <div class="card">\n            <div class="text text-third loading"></div>\n            <div class="text loading"></div>\n            <div class="text loading"></div>\n            <div class="text loading"></div>\n        </div>\n    </div>\n'];return _r_(function(i){_i_("790:5170e28e1");var e="";this.fn;return _r_(e+=t[0])})}()),booking.jstmpl("tt_photos_panel_loading",function(){_i_("790:4143f25e");var t=['\n\t<div class="zoom-wrapper">\n\t\t<div class="zoom-photo loading"></div>\n\t\t<div class="zoom-photo loading"></div>\n\t\t<div class="zoom-photo loading"></div>\n\t\t<div class="zoom-photo loading"></div>\n\t\t<div class="zoom-photo loading"></div>\n\t\t<div class="zoom-photo loading"></div>\n\t</div>\n'];return _r_(function(i){_i_("790:5170e28e2");var e="";this.fn;return _r_(e+=t[0])})}()),booking.jstmpl("tt_panel_error",function(){_i_("790:ce94ea7e");var n,s=['\n<div class="sliding-views-group is-shown" id="sliding-view__error">\n\n\n<div class="bui-alert bui-alert--error bui-alert--large bui-u-bleed@small" role="status">\n    ',"/private/bhpse_key_collect_error_refresh_page/name","</a>",'<a href="javascript:location.reload();">','\n    <span class="icon--hint bui-alert__icon" role="presentation">\n        ',"","iconset/warning","presentation","24",'\n    </span>\n    <div class="bui-alert__description">\n        <p class="bui-alert__text">\n          ',"\n        </p>\n    </div>\n</div>\n\n\n</div>\n"],o=["fe_error_text"];return _r_(function(i){_i_("790:8bee2ebb");var e="",t=this.fn;return e+=s[0],t.MN(o[0],(i.unshift({link_end:s[2],link_start:s[3]}),n=t.ME(s[1],t.MB,t.MN,null),i.shift(),n)),e+=[s[4],(i.unshift({class:s[5],name:s[6],role:s[7],width:s[8]}),n=t.HELPER("icon",i[0]),i.shift(),n),s[9],t.MC(o[0]),s[10]].join(""),_r_(e)})}()),B.define("sliding-view-model",function(i,e,t){_i_("790:3d31669b");var n=i("event-emitter"),s={},o={show:"sliding-view/show",showView:"sliding-view/showView",hide:"sliding-view/hide"};function a(){_i_("790:c041a663"),this.isShown=0,n.extend(this),_r_()}a.prototype.isPanelShown=function(){return _i_("790:0ec51808"),_r_(this.isShown)},a.prototype.hide=function(){_i_("790:e339093e"),this.isShown&&this.emit(o.hide),_r_()},a.prototype.show=function(i){if(_i_("790:b5dafb4d"),this.isShown)return this.emit(o.showView,i),_r_();this.emit(o.show,i),_r_()},t.exports={EVENTS:o,get:function(i){if(_i_("790:757623b0"),"string"!=typeof i||0===i.length)throw new Error("sliding-view-model: invalid .get() argument!");return s.hasOwnProperty(i)||(s[i]=new a,s[i].id=i),_r_(s[i])},hideAll:function(){for(var i in _i_("790:41b07915"),s)s[i].hide();_r_()},isAnyPanelOpen:function(){if(_i_("790:fac5c04d"),s)for(var i in s)if(s.hasOwnProperty(i))return _r_(s[i].isPanelShown());_r_()}},_r_()}),B.define("component/core/sliding-view-trigger",function(i,e,t){_i_("790:83b71692");var n=i("component"),o=i("sliding-view-model");t.exports=n.extend({init:function(){if(_i_("790:4aad685d"),this.panel=this.$el.data("paramPanel"),"string"!=typeof this.panel)throw new Error("core/sliding-view: `data-panel` is invalid or undefined!");this.preventDefault=void 0===this.$el.data("prevent-default")||this.$el.data("prevent-default"),this.model=o.get(this.panel);var n=this.el.dataset;if(n){this.params={};var s=new RegExp("param");Object.keys(n).forEach(function(i){_i_("790:7e858d44");var e=n[i];if(s.test(i)){var t=i.slice(5);t=t.toLowerCase(),this.params[t]=e}"paramIsStatic"===i&&(this.params.target=this.panel+"_static"),_r_()}.bind(this))}this._attachEvents(),_r_()},_attachEvents:function(){_i_("790:3c0e7bba"),this.$el.on("click",this.onClick.bind(this)),_r_()},onClick:function(i){_i_("790:315376a1"),i.preventDefault(),this.model.show(this.params),_r_()}}),_r_()}),B.define("component/core/sliding-view-content",function(r,i,e){"use strict";_i_("790:8b0b6695");var d=r("jquery"),t=r("fragment"),l=r("jstmpl");function n(i){_i_("790:2bf3e9b2"),this.id=i.id,this.$el=d("<div/>",{id:this.id,class:"sliding-views-group "}),i.isDefault&&(this.isDefault=i.isDefault),i.isInstant&&(this.isInstant=i.isInstant),i.title&&(this.title=i.title),i.fragment&&(this.fragmentName=i.fragment.name,this.fragmentParams=i.fragment.params,this.isLoading=!1),i.async&&(this.async=!0,this.cstName=i.async.cstName,this.loadingCstName=i.async.loadingCstName,this.concatJsFile=i.async.concatJsFile,this.concatCssFile=i.async.concatCssFile,this.isRendered=!1,this.isLoading=!1),i.datasource&&(this.datasource=i.datasource,this.isLoading=!1),i.beforeRender&&"function"==typeof i.beforeRender&&(this.beforeRender=i.beforeRender),i.afterRender&&"function"==typeof i.afterRender&&(this.afterRender=i.afterRender),i.destroyOnClose&&(this.destroyOnClose=!0),i.hasMap&&(this.hasMap=!0,this.mapId=i.fe_map_id),this.bindEvents(),_r_()}n.prototype.bindEvents=function(){},n.prototype.destroy=function(){_i_("790:85e23e04"),this.isRendered=!1,this.isLoading=!1,d(document).off("keyup"),this.$el.remove(),_r_()},n.prototype.setLoading=function(){_i_("790:4ec8c42d");var e=this,t=l(e.loadingCstName);t&&"__no_op__"!==t.name?this.isLoading?(this.isLoading=!1,this.$el.removeClass("loading"),this.$el.empty()):(this.isLoading=!0,this.$el.addClass("loading"),this.$el.html(l(this.loadingCstName).render())):r("async-loader").load({js:this.concatJsFile,css:this.concatCssFile}).then(function(i){_i_("790:810bec77"),"__no_op__"===t.name&&(t=l(e.loadingCstName)),e.isLoading?(e.isLoading=!1,e.$el.removeClass("loading"),e.$el.empty()):(e.isLoading=!0,e.$el.addClass("loading"),e.$el.html(t.render())),_r_()});_r_()},n.prototype._onFragmentSuccess=function(i,e,t){_i_("790:d2d05887");var n=this.data=t;return"function"==typeof this.beforeRender&&(n=this.beforeRender.call(this,t,e)),i.resolve(n,e),_r_(t)},n.prototype._getFragmentData=function(i,e){_i_("790:ba4467b6");i.resort_id||i.landmark_id||!(!i.dest_id||!i.dest_type||i.dest_id&&""===i.dest_id||i.dest_type&&""===i.dest_type)?t.call(this.fragmentName,i).then(this._onFragmentSuccess.bind(this,e,i),function(i){_i_("790:a5c4191f"),e.resolve({error:i}),_r_()}):e.resolve({error:"Missing fragment parameters"}),_r_()},n.prototype.getData=function(i){_i_("790:8ae49a99");var e=new d.Deferred,t=this,n=d.extend({},t.fragmentParams,i);return t.isRendered?e.resolve(t.data,n):t.fragmentName&&n?t._getFragmentData(n,e):t.datasource?t.datasource.then(t._onFragmentSuccess.bind(t,e,n),function(i){_i_("790:a5c4191f1"),e.resolve({error:i}),_r_()}):e.resolve({error:"No fragment to call"}),_r_(e)},n.prototype.render=function(e,t){_i_("790:d08a6944");var n=new d.Deferred,s=this;if(s.isRendered)n.resolve(s.renderedContent);else{var i,o=l(s.cstName),a=r("async-loader");o&&"__no_op__"!==o.name||(i=a.load({js:s.concatJsFile,css:s.concatCssFile})),i||o&&"__no_op__"!==o.name?i?i.then(function(i){_i_("790:72fa1bcd"),"__no_op__"===o.name&&(o=l(s.cstName)),s.renderedContent=o.render(e),s.isRendered=!0,s.setLoading(),n.resolve(s.renderedContent),"function"==typeof s.afterRender&&s.afterRender.call(s,e,t),_r_()}).catch(function(i){_i_("790:8e8639c2"),n.resolve({error:i}),_r_()}):(s.renderedContent=o.render(e),s.isRendered=!0,s.setLoading(),n.resolve(s.renderedContent),"function"==typeof s.afterRender&&s.afterRender.call(s,e,t)):n.resolve({error:"No cst"})}return _r_(n)},n.prototype.initMap=function(){_i_("790:8590765d");var i=this.$el.find(".tt-map-container__"+this.mapId).data("map-card-instance");i&&(this.mapApi=i,this.mapApi.initMap(this.data)),_r_()},e.exports=n,_r_()}),B.define("component/core/sliding-view",function(a,i,e){"use strict";_i_("790:117b1aa4");var r=B.debug&&B.debug("debug_beach_team_pilot"),d=a("events"),l=a("jquery"),s="is-shown",o=a("sliding-view-model"),n="sliding-view/open",t="sliding-view/close",_="sliding-view/load_view",c="sliding-view/back",h="sliding-view/forward",v="sliding-view/back_close",p="sliding-view/backdrop_close",f="sliding-view/forward_open",g="sliding-view/view_rendered";function u(i){_i_("790:a9db9c17");var e=this;if(i.id&&(e.id=i.id,e.model=o.get(e.id),e.$el=l("#"+e.id)),e.$title=e.$el.find(".sliding-view__title"),e.$content=e.$el,e.$close=this.$el.find("[data-close-button]"),e.current=null,e.prev=null,e.isShown=!1,e.viewStack=[],e.views={},e.useScrollBlocker=i.useScrollBlocker,e.srMap=l(".map_full_overlay__wrapper"),i.views)i.views.forEach(function(i){_i_("790:53fb973f"),e.registerView(i),_r_()});else{var t=new(a("component/core/sliding-view-content"))({id:e.id+"_static",isDefault:!0});e.registerView(t)}var n=window.location.hash.slice(1);""===n||n.match(/map_opened/)||(t=e.getView(n))&&t.id&&e.showAfterDomReady(t.id);e.$backdrop=l("<div/>",{class:"sliding-view__backdrop"}).appendTo("body"),this.bindEvents(),r.log("inited"),_r_()}u.prototype.bindEvents=function(){_i_("790:2ef1ea91");var e=this;this.model.on(o.EVENTS.show,function(i){_i_("790:59732ea5"),e.show(i.target,i),_r_()}),this.model.on(o.EVENTS.showView,function(i){_i_("790:b186fcbf"),e.showView(i.target,i),_r_()}),this.model.on(o.EVENTS.hide,this.hide.bind(this)),this.$close.on("click",this.onCloseClick.bind(this)),"www"===B.env.b_site_type&&this.$backdrop.on("click",function(){_i_("790:29dfcafd"),e.current&&e.current.id&&d.emit(p,e.current.id),window.location.hash.match(/map_opened/)?history.back(-1):e.hide(),_r_()}),this.useScrollBlocker&&(this.scrollBlocker=a("page-scroll-block"),this.scrollBlocker.init()),l(window).on("hashchange",this.handleChange.bind(this)),r.log("events binded"),_r_()},u.prototype.handleChange=function(i){_i_("790:59db2b99");var e=window.location.hash.slice(1);if("www"===B.env.b_site_type&&this.isOpen()&&"searchresults"===B.env.b_action&&(""===e||"_"===e)&&this.srMap&&this.srMap.is(":visible"))return window.location.hash="map_opened",_r_();e.match(/map_opened/)&&(e=e.substring(11));var t=this.getView(e),n=this;if(t&&n.current){if(!n.isOpen())return _r_();var s=0;n.prev&&n.prev.id===t.id&&(s=1),s?(d.emit(c,n.current.id),n.removeView(n.current)):n.cachedParams&&n.cachedParams&&(d.emit(h,t.id),n.showView(t.id,n.cachedParams))}else t&&!n.current?t.params&&(d.emit(f,t.id),n.show(t.id,t.params)):!t&&n.current&&(d.emit(v,n.current.id),n.hide());r.log("hashChanged",t),_r_()},u.prototype.registerView=function(i){_i_("790:8db88fb6"),i.id&&(this.views[i.id]=i),_r_()},u.prototype.isOpen=function(){return _i_("790:c325f973"),_r_(this.model.isShown)},u.prototype.onCloseClick=function(){_i_("790:f8056d61"),history.back(-1),_r_()},u.prototype.show=function(i,e){_i_("790:d6e453a8"),this.model.isShown=1,this.isShown=!0,this.toggleBackDrop(),this.$el.show();var t=this;this.animateOpen(this).then(function(){_i_("790:8dab8fec"),i?t.showView(i,e):t.viewStack.length||Object.keys(t.views).some(function(i){_i_("790:aac27195");var e=t.views[i];e.isDefault&&t.showView(e.id),_r_()}),_r_()}),this.useScrollBlocker&&this.scrollBlocker.freeze(),d.emit(n,i),_r_()},u.prototype.showAfterDomReady=function(i){_i_("790:b9aa7989");var e=this;"sliding-view__beach"!==i&&"sliding-view__photos"!==i||("searchresults"===B.env.b_action?i="sliding-view__ufi":"hotel"===B.env.b_action&&(i="sliding-view__property")),l(document).ready(function(){_i_("790:25615711"),setTimeout(function(){_i_("790:6a0cbbf2"),e.show(i),_r_()},20),_r_()}),_r_()},u.prototype.hide=function(){_i_("790:671070be"),this.model.isShown=0,this.isShown=!1,this.toggleBackDrop();var i=this;this.animateClose(this).then(function(){_i_("790:2c5249ca"),i.$el.hide(),i.removeAllViews(),_r_()}),this.useScrollBlocker&&this.scrollBlocker.unfreeze(),this.hasError&&this.$content.find("#sliding-view__error").remove(),this.current&&d.emit(t,this.current.id),_r_()},u.prototype.getView=function(i){_i_("790:21199824");var e=this.views[i];if(e)return _r_(e);_r_()},u.prototype.loadView=function(i,e){if(_i_("790:784c0a73"),!i.id)return _r_();if(e&&e.fromMap||window.location.hash.match(/map_opened/)?window.location.hash="map_opened-"+i.id:window.location.hash=i.id,this.viewStack.length?this.prev=this.getView(this.viewStack[this.viewStack.length-1]):this.prev=null,this.viewStack.push(i.id),this.setTitle(i,e),this.toggleBackBtn(),this.renderView(i,e),this.current&&this.current.id===i.id)return _r_();this.current=i,this.setActiveClass(),d.emit(_,i.id),_r_()},u.prototype.setActiveClass=function(){_i_("790:3a7571f1");var e=this,i=this.viewStack;i.length&&i.forEach(function(i){_i_("790:9fa1143b"),e.$content.removeClass("active-view__"+i),_r_()}),e.current&&e.$content.addClass("active-view__"+e.current.id),_r_()},u.prototype.removeAllViews=function(){_i_("790:8659ed27");var t=this;if(t.viewStack.forEach(function(i){_i_("790:f3a6f7af");var e=t.getView(i);e&&e.destroyOnClose&&e.destroy(),e.$el.removeClass("is-shown"),_r_()}),t.current=null,t.setActiveClass(),t.viewStack=[],t.prev=null,window.location.hash.match(/map_opened/))r.log("map open all panels closed");else{if("mdot"===B.env.b_site_type&&(window.location.href.indexOf("htMap")||window.location.href.indexOf("srMap")))return _r_();window.location.hash="_"}_r_()},u.prototype.removeView=function(i,e){_i_("790:a8fe4bdd");var t=this;if(this.setTitle(i,e),this.prev?this.animateClose(i).then(function(){_i_("790:581d0616"),i.destroyOnClose&&i.destroy(),t.hasError&&t.$content.find("#sliding-view__error").remove(),_r_()}):this.hide(),this.current=this.prev,t.setActiveClass(),this.viewStack.pop(i.id),this.toggleBackBtn(),1<this.viewStack.length){var n=this.viewStack.indexOf(this.current.id);this.prev=0<n?this.getView(this.viewStack[n-1]):null}else this.prev=null;_r_()},u.prototype.animateClose=function(i){_i_("790:a23082ea");var e=new l.Deferred,t=i.$el,n=i.isInstant?0:200;return t.removeClass(s),setTimeout(function(){return _i_("790:ddee4527"),_r_(e.resolve())},n),_r_(e)},u.prototype.animateOpen=function(i){_i_("790:045ee441");var e=new l.Deferred,t=i.$el,n=i.isInstant?0:400;return setTimeout(function(){return _i_("790:56b9f048"),t.addClass(s),_r_(e.resolve())},n),_r_(e)},u.prototype.renderView=function(t,n){_i_("790:6f77bf37");var s=this,i=s.$content.find("#"+t.id);if(i.length)i.addClass("is-shown"),this.$el.show();else{var o=t.$el;t.setLoading(),this.$content.append(o),this.animateOpen(t).then(function(){_i_("790:e6e5ab17"),t.getData(n).then(function(i,e){_i_("790:d4b8ccab"),t.render(i,e).then(function(i){if(_i_("790:09fd0ce3"),i&&"string"==typeof i&&""!==i)o.html(i),s.hasError=0,s.loadComponents(t).then(function(i){_i_("790:32ea9584"),r.log("rendered and components loaded"),d.emit(g,t.id),_r_()}),s.cachedParams=l.extend({},t.fragmentParams,n);else{var e=a("jstmpl")("tt_panel_error");s.$content.append(e.render()),s.hasError=1,t.destroy(),s.cachedParams=null,B&&"function"==typeof B.squeak&&i&&i.error&&B.squeak("Error on fragment call while loading: "+t.id+" : "+i.error)}_r_()}),_r_()}),_r_()})}_r_()},u.prototype.showView=function(i,e){_i_("790:5656e8ec"),this.current&&this.current.id===i||this.loadView(this.getView(i),e),_r_()},u.prototype.loadComponents=function(i){_i_("790:e2adcccf");var e=new l.Deferred,t=this;return this.$content.find("[data-sliding-view-trigger]").on("click",function(){_i_("790:7856d663");var i=l(this).data("target"),e=l(this).data();t.showView(i,e),_r_()}),i.$el.loadComponents(),setTimeout(function(){_i_("790:eef2d633"),i.hasMap&&i.mapId&&i.initMap(),window.BUI.initComponents(i.$el[0]),e.resolve(),_r_()},20),_r_(e)},u.prototype.setTitle=function(i,e){if(_i_("790:eb730a6f"),e&&e.dest_title){var t=e.dest_title;t&&""!==t&&(this.prev&&(this.prev.title=this.$title.text()),this.$title.text(t))}else this.prev?this.$title.text(this.prev.title):i&&i.title&&this.$title.text(i.title);_r_()},u.prototype.toggleBackBtn=function(){_i_("790:189b3327"),1<this.viewStack.length?(this.$close.find(".sliding-view__icon-back").show(),this.$close.find(".sliding-view__icon-close").hide()):(this.$close.find(".sliding-view__icon-back").hide(),this.$close.find(".sliding-view__icon-close").show()),_r_()},u.prototype.toggleBackDrop=function(){_i_("790:ca8deae4"),this.isShown?this.$backdrop.addClass(s):this.$backdrop.removeClass(s),_r_()},e.exports=u,_r_()});